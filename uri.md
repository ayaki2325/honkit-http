# URI

前回、HTTPの全体像を学びました。その中で、Web上に存在する情報を意味するリソースという用語を紹介しました。本章では、そのリソースを指し示す手段を提供するURIを解説します。

URIとは、**リソースを統一的に識別するID**のことです。今はURLと同じようなものだという理解で問題ありません。

URIさえあれば、あらゆるリソースに簡単にアクセスすることができます。

## URIの構文

URIは複数の要素からなりますが、私たちが普段目にする`http://example.jp/news`といったURIを構成する要素はあくまで一部です。したがって、ここでは以下のような複雑なURIを例として使います。

```
http://ayaki:pass@example.jp:8080/news?page=2&mode=dark#no5
```

要素ごとに分けると以下のようになっています。

| 要素名 | 説明 | 例 |
| ------ | ---- | -- |
| URIスキーム | 利用するプロトコルを示すことが多い[^1] | `http` |
| ユーザー情報 | アクセスする際に使用するユーザー名とパスワード | `ayaki:pass` |
| ホスト名 | ドメイン名かIPアドレス | `example.jp` |
| ポート番号 | どのアプリケーションと通信するかを示す | `8080` |
| パス | そのホストの中でリソースを一意に示す | `/news` |
| クエリパラメータ | サーバーに送信する追加情報を示す | `page=2&mode=dark` |
| URIフラグメント | リソース内部のさらに細かい部分を特定するときに使う | `#no5` |

## パスに使える文字

URIのパスには、以下**ASCII文字**が使えます。

- アルファベット: A-Za-z
- 数字: 0-9
- 記号: -.~:@!$&'()

それ以外の文字を使いたい場合、**%エンコード**という方式を使います。たとえば、「あ」という文字は%エンコードすると「%E3%81%82」になります。これは、「あ」はUTF-8で「0xE3 0x81 0x82」であることに起因します。

{% hint style='tip' %}
ブラウザのアドレスバーには普通に日本語を入力できると思いますが、実際には%エンコードされた値をサーバーとやりとりします。
{% endhint %}

%エンコードの結果は文字コードによって異なります。たとえば、Shift_JISという文字コードで「あ」を%エンコードすると「%82%A0」です。したがって、クライアントとサーバーで文字コードが異なると予期せぬ結果をもたらします。通常UTF-8を使うようにすれば問題ありません。

## URLとURN

**URIはURLとURNの総称**です。

URNはドメイン名とは独立してリソースに恒久的な名前をつけたものです。たとえば、ISBNを利用した`urn:isbn:9784274066771`というURNが考えられます。

URNを目にすることはあまりないので、URIとURLはだいたい同じものと考えていいわけです。

[^1]: 後述するURNなどプロトコルを示さないURIスキームも存在します。
